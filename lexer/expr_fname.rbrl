%%{
#%

machine Lex;

EXPR_FNAME := |*

  empty_lines;

  heredoc_ident => Heredoc;

  back_ref | nth_ref => {
    gen_token(:tGVAR)
    fnext EXPR_END;
    fbreak;
  };

  (
      operator_expr
    | '`' % { next_state = EXPR_ENDFN }
    | reserved
    | any_ident % { next_state = EXPR_ENDFN } 
  ) => Keyword;

  any => { fhold; fcall COMMON_EXPR; };

*|;

}%%
#%